
if(typeof vsm=="undefined")var vsm={};vsm.attachEvent=function(obj,eventname,action){obj=vsm.object(obj);if(obj.addEventListener){if(eventname.substring(0,2)=='on'){eventname=eventname.substring(2);}
obj.addEventListener(eventname,action,false);}else if(obj.attachEvent){if(eventname.substring(0,2)!='on'){eventname='on'+eventname;}
obj.attachEvent(eventname,action);}};vsm.detachEvent=function(obj,eventname,action){obj=vsm.object(obj);if(obj.removeEventListener){if(eventname.substring(0,2)=='on'){eventname=eventname.substring(2);}
obj.removeEventListener(eventname,action,false);}else if(obj.detachEvent){if(eventname.substring(0,2)!='on'){eventname='on'+eventname;}
obj.detachEvent(eventname,action);}};vsm.loadScript=function(file,action){var h=document.getElementsByTagName('SCRIPT');var s=h.length;var f=false;for(var i=0;i<s;i++){var itm=h[i];if(itm.getAttribute("src")&&itm.getAttribute("src")==file){f=true;i=s;}}
if(!f){s=document.createElement('SCRIPT');s.type='text/javascript';s.src=file;if(typeof s.onreadystatechange=='object'){s.onreadystatechange=function(){if(s.readyState=='loaded'||s.readyState=='complete'){vsm.eval(action);}};}else{s.onload=function(){vsm.eval(action);};}
h=document.getElementsByTagName('head');if(h[0]){h[0].appendChild(s);}}else{vsm.eval(action);}};vsm.load=function(o,opts){o=o.split('?');o[1]=(o.length==2)?"?"+o[1]:'';var cb=(opts&&(opts.arguments||opts.variable||opts.callback))?function(){vsm.load.check(o[0],opts,0);}:null;var url='/lib/'+o[0].toLowerCase()+'/'+o[0].toLowerCase()+'.js'+o[1];if(opts&&opts.url)url=opts.url;vsm.loadScript(url,cb);if(opts&&opts.css)vsm.loadCss('/lib/'+o[0].toLowerCase()+'/'+o[0].toLowerCase()+'.css'+o[1]);};vsm.load.check=function(o,opts,idx){o=(o.indexOf('.')!=-1)?o:'vsm.'+o;if(idx>100){throw('Error loading '+o+' library');return;}
var d=o.split('.');var w=window[d[0]];for(var i=1;i<d.length&&w&&(w=(typeof w[d[i]]!='undefined')?w[d[i]]:false);i++);if(!w){idx=idx||0;setTimeout(function(){vsm.load.check(o,opts,idx+1);},50);}else{function F(args){return w.apply(this,args);}
F.prototype=w.prototype;if(opts.variable&&(!(window[opts.variable]instanceof w))){window[opts.variable]=new F(opts.arguments);}
if(opts.arguments&&!opts.variable){F(opts.arguments);}
if(opts.callback){vsm.eval(opts.callback);}}};vsm.json=function(s){if(!s||s.charAt(0)!='{'&&s.charAt(0)!='[')return s;var json;try{if(typeof JSON!='undefined'&&typeof JSON.parse=='function'){json=JSON.parse(s);}else{json=eval('('+s+')');}
return json;}catch(e){console.log('JSON corrupto: '+s);}};vsm.jsonp=function(url,callback){var f=vsm.randomID(),s='callback=vsm.jsonp.'+f;vsm.jsonp[f]=callback;s=(url.indexOf('?')!=-1)?'&'+s:'?'+s;vsm.loadScript(url+s);};vsm.loadCss=function(file){var h=document.getElementsByTagName('LINK');var s=h.length;var f=false;for(var i=0;i<s;i++){var itm=h[i];if(itm.getAttribute("href")&&itm.getAttribute("href")==file){f=true;i=s;}}
if(!f){s=document.createElement('LINK');s.rel='stylesheet';s.href=file;h=document.getElementsByTagName('head');if(h[0]){h[0].appendChild(s);}}};vsm.ajaxCall=function(url,callback_function,error_function,method,plainform,http_object){if(typeof http_object!=='object'||http_object===null){if(window.XMLHttpRequest){http_object=new XMLHttpRequest();}else if(window.ActiveXObject){try{http_object=new ActiveXObject("Msxml2.XMLHTTP");}catch(e){try{http_object=new ActiveXObject("Microsoft.XMLHTTP");}catch(er){}}}}
if(!http_object){return false;}
var data=null;if(plainform){data=plainform;}
var hash;if(!method){method='GET';if(url.indexOf('?')!=1)hash=url.substring(url.indexOf('?'));}else{hash=plainform;}
if(!hash)hash=url;hash=vsm.hash(hash);http_object.open(method,url,true);http_object.setRequestHeader('vsmajax',hash);if(method.toUpperCase()=='POST'&&plainform){http_object.setRequestHeader('Content-Type','application/x-www-form-urlencoded');}
http_object.onreadystatechange=function(){try{if(http_object.readyState==4){if(http_object.status==200){var err=(http_object.responseText.substring(0,9)=="vsmerror:")?http_object.responseText.substring(9):false;var p;var a;var f;if(err&&err.length>0){vsm.eval(error_function,err);}else{vsm.eval(callback_function,http_object.responseText);}}else{if(typeof vsmdebug!='undefined'){alert('There was a problem with the request. (Code: '+http_object.status+')');}}}}catch(eerr){if(typeof vsmdebug!='undefined'){alert('Exception: '+eerr.description);}}};http_object.send(data);return http_object;};vsm.ajaxAbort=function(obj){if(typeof obj!='object')return;if(typeof obj.abort!='function')return;obj.abort();};vsm.ajaxForm=function(formObj,callback_function,error_function,http_object){if(formObj){var method='GET';if(formObj.method){method=formObj.method.toUpperCase();}
var data='';for(var i=0;i<formObj.length;i++){var fieldObj=formObj[i];switch(fieldObj.type){case'checkbox':case'radio':if(fieldObj.checked){data+=fieldObj.name+'='+encodeURIComponent(fieldObj.value)+'&';}
break;case'select-one':data+=fieldObj.name+'='+encodeURIComponent(fieldObj.options[fieldObj.selectedIndex].value)+'&';break;case'reset':case'submit':case'button':break;default:data+=fieldObj.name+'='+encodeURIComponent(fieldObj.value)+'&';break;}}
if(data.length>0){data=data.slice(0,-1);}
var url=formObj.action;if(method.toUpperCase()=='GET'&&data){url=url+'?'+data;data=null;}
return vsm.ajaxCall(url,callback_function,error_function,method,data,http_object);}else{return false;}};vsm.opacity=function(obj,opacity){var obj=vsm.object(obj);if(obj){var sty=obj.style;switch(opacity){case 0:sty.display='none';break;case 1:sty.visibility='hidden';break;default:opacity=Math.floor(opacity);sty.display='';sty.visibility='visible';sty.opacity=(opacity/100);sty.MozOpacity=(opacity/100);sty.KhtmlOpacity=(opacity/100);if(sty.filter)sty.filter=sty.filter.replace(/alpha\([^)]*\)/,'').replace(/^\s*|\s*$/g,"");if(opacity<100)sty.filter+=" alpha(opacity="+opacity+")";}}};vsm.contrastColor=function(color,dark,light){dark=dark||'black';light=dark||'white';return(parseInt(color,16)>0xffffff/2)?dark:light;}
vsm.size=function(value){if(!value||isNaN(value))return;var a=new Array("bytes","KB","MB","GB","TB","PB");var pos=0;while(value>=1000){value=value/1024;pos++;}
return vsm.formatNumber(Math.round(value*Math.pow(10,2))/Math.pow(10,2))+' '+a[pos];}
vsm.effects={};vsm.effects.fade=function(obj,opacity,functionatend,steps){var fps=30;var data=[];var index=0;var runningproc=false;var time=0;var steped=0;obj=vsm.object(obj);if(obj){var id=obj.id;if(currentopacity==opacity)return;var currentopacity=vsm.currentStyle(obj,'filter');if(currentopacity=='none'){currentopacity=vsm.currentStyle(obj,'opacity')*100;}else{currentopacity=(currentopacity)?currentopacity.replace('alpha(opacity=','').replace(')','')*1:100;}
if(!functionatend)functionatend=null;if(!steps||isNaN(steps)){steps=10;}
index++;if(data[index]){delete data[index];}
data[index]={"id":id,"current":currentopacity,"end":opacity,"step":((opacity-currentopacity)/steps),"trigger":functionatend,"fading":true};vsmSetOpacity(id,currentopacity);var i=0;for(var key in data)i++;if(i==1&&!runningproc){process();}}
function process(){if(runningproc)return;var d=new Date();var st=d.getTime();for(var key in data){runningproc=true;var fd=data[key];var obj=document.getElementById(fd.id);var endfade=false;if(obj){var step=fd.step;var opacity=fd.current+step;if(step<0){if(opacity<=fd.end)endfade=true;}else{if(opacity>=fd.end)endfade=true;}
if(endfade){vsm.opacity(obj,fd.end);var trigger=fd["trigger"];delete data[key];if(trigger){if(trigger.indexOf('(')==-1)trigger+='()';eval(trigger);}}else{vsm.opacity(obj,opacity);fd["current"]=opacity;}}else{delete data[key];}}
var s=data.length;runningproc=false;if(s>0){d=new Date();time+=d.getTime()+(1000/fps)-st;steped++;var rfps=time/steped;rfps=(rfps>fps)?fps:rfps;if(time>1000){steped=0;time=0;}
setTimeout(process,1000/rfps);}}};vsm.eval=function(action){var args=Array.prototype.slice.call(arguments,1);if(typeof action=='string'){var fnc=action.match(/([\w\.]*)?\(/);fnc=(fnc)?fnc[1]:action;if(!fnc)return;if(action.substring(action.length-1)==")"){action=action.substring(fnc.length+1,action.length-1).split(",");for(var i=0;i<action.length&&(action[i]=eval(action[i]));i++);args=args.concat(action);}
var ns=fnc.split(".");fnc=ns.pop();var action=window;for(i=0;i<ns.length&&(action=action[ns[i]]);i++);var iealert=(vsm.browser.msie<9&&fnc=='alert'),to=(iealert)?'object':'function';if(typeof action[fnc]!=to)return;if(iealert){alert(args);return}
return action[fnc].apply(action,args);}else if(typeof action=='function'){return action.apply(action,args);}};vsm.currentStyle=function(obj,property){var x=vsm.object(obj);if(x.currentStyle)
var y=x.currentStyle[property];else if(window.getComputedStyle)
var y=document.defaultView.getComputedStyle(x,null)[property];return y;};vsm.addClass=function(el,className){el=(typeof el=='string')?document.getElementById(el):el;if(!el||typeof el.className=='undefined')return el;className=vsm.trim(className);if((' '+el.className+' ').indexOf(' '+className+' ')==-1){el.className+=' '+className;}
el.className=vsm.trim(el.className);return el;};vsm.replaceClass=function(el,oldClass,newClass){el=(typeof el=='string')?document.getElementById(el):el;if(!el||typeof el.className=='undefined')return el;var re=new RegExp(' '+vsm.trim(oldClass)+' ','g');el.className=vsm.trim((' '+el.className+' ').replace(re,' '+newClass+' ').replace(/\s+/g,' '));if(el.className.length==0)el.removeAttribute('class');return el.className;};vsm.removeClass=function(el,className){return vsm.replaceClass(el,className,'');}
vsm.hasClass=function(el,className){el=(typeof el=='string')?document.getElementById(el):el;if(!el||typeof el.className=='undefined')return el;return((' '+el.className.toLowerCase()+' ').indexOf(' '+className.toLowerCase()+' ')!=-1);}
vsm.matches=function(el,cssRule){if(!el)return;if(el.matches){return el.matches(cssRule);}else if(el.webkitMatchesSelector){return el.webkitMatchesSelector(cssRule);}else if(el.mozMatchesSelector){return el.mozMatchesSelector(cssRule);}else if(el.msMatchesSelector){return el.msMatchesSelector(cssRule);}else{alert('Este browser no soporta element.matches ni element.[prefix]MatchesSelector');}}
var transitionFunctions;vsm.transitionEnd=function(el,func,transitionProperty,defaultMillSec){el=(typeof el=='string')?document.getElementById(el):el;if(!el)return;setTimeout(func,defaultMillSec);}
vsm.currentOpacity=function(obj,defaultOpacity){return defaultOpacity;};vsm.object=function(obj){var obj=(typeof(obj)=='object')?obj:document.getElementById(obj);if(obj){if(!obj.id)obj.id=vsm.randomID();return obj;}else{return undefined;}};vsm.randomID=function(p){p=p||'vsm';vsm.randomID.idx=vsm.randomID.idx+1||0;var r=parseInt((+new Date()/1000)).toString();return p+'v'+r.substr(r.length-5)+'v'+vsm.randomID.idx;};vsm.checkObject=function(obj,vsmtype){var obj=vsm.object(obj);if(obj!=undefined&&obj.getAttribute('data-vsmel')!=vsmtype)alert('VSM Element Error in '+((vsm.checkObject.caller.name)?vsm.checkObject.caller.name:'undefined function')+': "'+obj.id+'" must type "'+vsmtype+'" (vsmel="'+vsmtype+'")');return obj;};vsm.key=function(e){var evt=(e)?e:(window.event)?window.event:null;if(evt)return((evt.charCode)?evt.charCode:((evt.keyCode)?evt.keyCode:((evt.which)?evt.which:0)));};vsm.trim=function(s){return s.replace(/^\s*|\s*$/g,"").replace(/\s+/g,' ');};vsm.capitalize=function(s){return s.charAt(0).toUpperCase()+s.slice(1);};vsm.findPos=function(obj){obj=vsm.object(obj);if(typeof(obj.offsetParent)!='undefined'){for(var posX=0,posY=0;obj;obj=obj.offsetParent){posX+=obj.offsetLeft;posY+=obj.offsetTop;}}
return{x:posX,y:posY};};vsm.findPosFixed=function(obj){obj=vsm.object(obj);var curleft=curtop=0,scr=obj,fixed=false;while((scr=scr.parentNode)&&scr!=document.body){curleft-=scr.scrollLeft||0;curtop-=scr.scrollTop||0;if(vsm.currentStyle(scr,"position")=="fixed")fixed=true;}
if(fixed&&!window.opera){var scrDist=scrollDist();curleft+=scrDist[0];curtop+=scrDist[1];}
do{curleft+=obj.offsetLeft;curtop+=obj.offsetTop;}while(obj=obj.offsetParent);return{x:curleft,y:curtop};}
function scrollDist(){var html=document.getElementsByTagName('html')[0];if(html.scrollTop&&document.documentElement.scrollTop){return[html.scrollLeft,html.scrollTop];}else if(html.scrollTop||document.documentElement.scrollTop){return[html.scrollLeft+document.documentElement.scrollLeft,html.scrollTop+document.documentElement.scrollTop];}else if(document.body.scrollTop)
return[document.body.scrollLeft,document.body.scrollTop];return[0,0];}
vsm.formatNumber=function(number,decimals){if(isNaN(number))return number;return number_format(number,decimals,',','.');}
function number_format(number,decimals,dec_point,thousands_sep){var n=!isFinite(+number)?0:+number,prec=!isFinite(+decimals)?0:Math.abs(decimals),sep=(typeof thousands_sep==='undefined')?',':thousands_sep,dec=(typeof dec_point==='undefined')?'.':dec_point,s='',toFixedFix=function(n,prec){var k=Math.pow(10,prec);return''+Math.round(n*k)/k;};s=(prec?toFixedFix(n,prec):''+Math.round(n)).split('.');if(s[0].length>3){s[0]=s[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,sep);}
if((s[1]||'').length<prec){s[1]=s[1]||'';s[1]+=new Array(prec-s[1].length+1).join('0');}
return s.join(dec);}
vsm.scaleToFit=function(width,height,targetWidth,targetHeight,pixelate){var hfactor=targetWidth/width;if(!pixelate&&hfactor>1)hfactor=1;var vfactor=targetHeight/height;if(!pixelate&&vfactor>1)vfactor=1;var factor=Math.min(vfactor,hfactor);width=Math.round(width*factor);height=Math.round(height*factor);var left=Math.floor(targetWidth/2-width/2);var top=Math.floor(targetHeight/2-height/2);return{left:left,top:top,width:width,height:height,factor:factor};}
vsm.scaleToCover=function(width,height,targetWidth,targetHeight,focusX,focusY){if(!focusX)focusX=width/2;if(!focusY)focusY=height/2;var hfactor=targetWidth/width;var vfactor=targetHeight/height;var factor=Math.max(vfactor,hfactor);width=Math.round(width*factor);height=Math.round(height*factor);focusX=Math.round(focusX*factor);focusY=Math.round(focusY*factor);var left=Math.floor(targetWidth/2-focusX);if(left>0)left=0;if(left+width<targetWidth)left=targetWidth-width;var top=Math.floor(targetHeight/2-focusY);if(top>0)top=0;if(top+height<targetHeight)top=targetHeight-height;return{left:left,top:top,width:width,height:height,factor:factor};}
vsm.pathInfo=function(path){if(!path)return;var schema='',hostname='',port='',dir='',basename='',name='',extension='',querystring='',title='';if(path.toLowerCase().substr(0,7)=='http://'||path.toLowerCase().substr(0,8)=='https://'){if(path.indexOf('?')!=-1){querystring=path.substr(path.indexOf('?')+1);path=path.split('?')[0];}
schema=path.substr(0,path.indexOf('/')-1);hostname=path.split('/')[2];if(hostname.indexOf(':')!=-1){port=hostname.split(':')[1];hostname=hostname.split(':')[0];}
path=path.substr(path.indexOf('//')+2);if(path.indexOf('/')!=-1){path=path.substr(path.indexOf('/'));}else{path='/';}}else if(path.toLowerCase().substr(0,7)=='file://'){if(path.indexOf('?')!=-1){querystring=path.substr(path.indexOf('?')+1);path=path.split('?')[0];}
path=path.substr(path.indexOf('//')+2);schema='file';}else{schema='file';}
dir=path.replace(/\\/g,'/').replace(/\/[^\/]*$/,'');;basename=path.replace(/\\/g,'/').replace(/.*\//,'');if(basename){var dotp=basename.lastIndexOf('.');if(dotp==-1){name=basename;}else{name=basename.substr(0,dotp);extension=basename.substr(dotp+1);}
title=(name.substr(0,1).toUpperCase()+name.substr(1));title=title.replace(/-/g,' ').replace(/_/g,' ');title=title.replace(/\s+/g,' ').replace(/^\s+|\s+$/,'');}
return{schema:schema,hostname:hostname,port:port,path:path,dir:dir,basename:basename,name:name,extension:extension,querystring:querystring,title:title}}
vsm.browser=(function(){var ua=navigator.userAgent,tem;var M=ua.match(/(opera|chrome|safari|firefox|msie|trident)\/?\s*(\.?\d+(\.\d+)*)/i);var N=M[1]||navigator.appName,s={};s.name=N.toLowerCase();s.version=(M&&(tem=ua.match(/version\/([\.\d]+)/i))!=null)?tem[1]:M[2];if(s.name=='trident'){s.version=ua.match(/rv\:([\.\d]+)/i)[1];s.name='msie';}
s.major=s.version.split('.');s.minor=(s.major.length>1)?s.major[1]:"";s.major=s.major[0];s.OS=(M&&(tem=ua.match(/(macintosh|linux|windows|ipad|iphone|ipod)/i))!=null)?tem[1].toLowerCase():"";s[s.name]=s.version;return s;})();vsm.dom={updateSession:function(domID){if(!vsm.session.loggedin&&getCookie("vsmloggedin")!=0&&getCookie("vsmloggedin")){var o=vsm.json(getCookie("vsmloggedin"));vsm.session=o;vsm.session.loggedin=1;}
vsm.dom.updateObject(81,null,vsm.session,domID);},updateObject:function(ot,oid,o,domID){var d=vsm.object(domID)||document;d=(d.querySelectorAll)?d.querySelectorAll('[data-vsmot]'):d.getElementsByTagName('*');for(var i=0,n,l=d.length;i<l;i++){if(d[i]&&d[i].getAttribute('data-vsmot')&&d[i].getAttribute('data-vsmot')==ot){if(!oid||d[i].getAttribute('data-vsmoid')==oid){var p=d[i].getAttribute('data-vsmp');var c=d[i].getAttribute('data-vsmc'),nc=false;if(typeof c=='string'&&c.substr(0,1)=="!")nc=c.substring(1);if(!nc&&c&&o[c]){vsm.replaceClass(d[i],'hidden','visible');vsm.addClass(d[i],'visible');}
if(!nc&&c&&!o[c]){vsm.replaceClass(d[i],'visible','hidden');vsm.addClass(d[i],'hidden');}
if(nc&&o[nc]){vsm.replaceClass(d[i],'visible','hidden');vsm.addClass(d[i],'hidden');}
if(nc&&!o[nc]){vsm.replaceClass(d[i],'hidden','visible');vsm.addClass(d[i],'visible');}
if(p&&o[p]){vsm.replaceClass(d[i],'hidden','visible');if(p=='image'&&d[i].tagName=='IMG'){d[i].src=o[p];}else if(d[i].tagName=='INPUT'&&d[i].type=='checkbox'){d[i].checked=true;}else{d[i].innerHTML=o[p].replace('+',' ');d[i].setAttribute('title',o[p].replace('+',' '));}}}}}},ready:function(c,id){if(!id){id=vsm.randomID('vsmdomready');window[id]=false;}
if(vsm.browser.msie<9){(function(){try{window.document.documentElement.doScroll('left');}catch(e){setTimeout(arguments.callee,50);return;}
if(!window[id]){window[id]=true;c();}})();}
if(vsm.browser.chrome||vsm.browser.safari){if(document.readyState=="complete"||document.readySate=="loaded"||document.readyState=="interactive"){if(!window[id]){window[id]=true;c();}}else{setTimeout('vsm.dom.ready('+c+','+id+')',9);}}else if(document.addEventListener){document.addEventListener("DOMContentLoaded",function(){if(!window[id]){window[id]=true;c();}},false);}}};vsm.preference={};vsm.preference=function(p,v){return(vsm.preference[p])?vsm.preference[p]:v;};vsm.preference.set=function(p,v,sc){sc=(typeof sc=='undefined')?true:sc;var o=vsm.preference,i,s='';o[p]=v;for(i in o)if(typeof o[i]!='function')s+=i+'='+o[i]+'&';if(s&&sc)setCookie('vsm_preference',s,false,'/');};vsm.session={};if(getCookie("vsmloggedin")!=0&&getCookie("vsmloggedin")){vsm.dom.ready(vsm.dom.updateSession);}
if(vsm.browser.msie<9){var e=["abbr","article","aside","audio","canvas","datalist","details","figure","figcaption","footer","header","hgroup","mark","menu","meter","nav","output","progress","section","time","video"];for(var i=0;i<e.length;i++)document.createElement(e[i]);}
vsm.setCookie=function(name,value,expires,path,domain,secure){return setCookie(name,value,expires,path,domain,secure);}
vsm.getCookie=function(name){return getCookie(name);}
vsm.deleteCookie=function(name,path,domain){return deleteCookie(name,path,domain);}
function setCookie(name,value,expires,path,domain,secure){var curCookie=name+"="+escape(value)+
((expires)?"; expires="+expires.toGMTString():"")+
((path)?"; path="+path:"")+
((domain)?"; domain="+domain:"")+
((secure)?"; secure":"");document.cookie=curCookie;}
function getCookie(name){var dc=document.cookie;var prefix=name+"=";var begin=dc.indexOf("; "+prefix);if(begin==-1){begin=dc.indexOf(prefix);if(begin!==0){return null;}}else{begin+=2;}
var end=document.cookie.indexOf(";",begin);if(end==-1){end=dc.length;}
return unescape(dc.substring(begin+prefix.length,end));}
function deleteCookie(name,path,domain){if(getCookie(name)){document.cookie=name+"="+
((path)?"; path="+path:"")+
((domain)?"; domain="+domain:"")+"; expires=Thu, 01-Jan-1970 00:00:01 GMT";}}
function writeFlash(src,w,h){var args=arguments;var callArgs="'codebase','http://fpdownload.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=8,0,0,0','width','"+w+"','height','"+h+"','src','"+src+"','movie','"+src+"',";for(var i=3;i<args.length;i++){callArgs+="'"+args[i]+"',";}
if(callArgs.indexOf('quality')<0){callArgs+="'quality','high',";}
if(callArgs.indexOf('bgcolor')<0){callArgs+="'bgcolor','#ffffff',";}
if(callArgs.indexOf('wmode')<0){callArgs+="'wmode','transparent',";}
callArgs=callArgs.substr(0,callArgs.length-1);eval("AC_FL_RunContent("+callArgs+")");}
var vsmStrmImage=[];function vsmFindPos(oElement){if(typeof(oElement.offsetParent)!='undefined'){for(var posX=0,posY=0;oElement;oElement=oElement.offsetParent){posX+=oElement.offsetLeft;posY+=oElement.offsetTop;}
return[posX,posY];}else{return[oElement.x,oElement.y];}}
vsm.scripttime={};vsm.scripttime.set=function(value,alert){var obj=vsm.object('vsmscripttime');if(!obj){var obj=document.createElement('DIV');obj.id='vsmscripttime';obj.className='vsmscripttime vc-';document.body.appendChild(obj);}
obj.innerHTML=value;if(alert){vsm.addClass(obj,'alert');}else{vsm.removeClass(obj,'alert');}}
function vsmImageStreaming(e,d){if(!d)d=document;var y=d.getElementsByTagName('img');var ch=document.documentElement.clientHeight;var st=(document.documentElement.scrollTop)?document.documentElement.scrollTop:document.body.scrollTop;for(var i=0;i<y.length;i++){var vsmsrc=y[i].getAttribute('vsmsrc');var l=y[i].src.length;if(vsmsrc&&y[i].src.substring(l-12)=='/lib/1x1.gif'){var pos=vsmFindPos(y[i]);var pos2=y[i].offsetHeight+pos[1];if((pos[1]>st-200&&pos[1]<ch+st+200)||(pos2>st-200&&pos2<ch+st+200)){if(vsmStrmImage[vsmsrc]===undefined){vsmStrmImage[vsmsrc]=new Image();vsmStrmImage[vsmsrc].src=vsmsrc;}
if(vsmStrmImage[vsmsrc].complete){y[i].src=vsmsrc;}else{vsmStrmImage[vsmsrc].obj=y[i];vsmStrmImage[vsmsrc].onload=function(){this.obj.src=this.src;};}}}}}
var vsmActivePanel;function vsmHidePanel(){if(vsmActivePanel){vsmActivePanel.style.display='none';vsmActivePanel=null;}}
function vsmShowPanel(obj){if(typeof(obj)!='object'){obj=document.getElementById(obj);}
if(obj){if(vsmActivePanel){vsmHidePanel(vsmActivePanel);}
vsmActivePanel=obj;vsmActivePanel.style.display='';}}
vsm.loginKeys=function(e){e=(window.event)?window.event:e;if(e.keyCode==86&&(e.ctrlKey||e.metaKey)&&e.shiftKey){}else if(e.keyCode==27){if(typeof vsmCloseModalWindow=='function'){vsmCloseModalWindow();}
return false;}}
function vsmWalk(objid,x1,y1,w1,h1,x2,y2,w2,h2,steps,speed,functionatend,functionstep,step){if(!step){step=0;}
if(!functionstep){functionstep='void(0)';}
if(!functionatend){functionatend='void(0)';}
var obj=document.getElementById(objid);if(x1==null)x1=obj.offsetLeft;if(y1==null)y1=obj.offsetTop;if(w1==null)w1=obj.offsetWidth;if(h1==null)h1=obj.offsetHeight;if(w2==null){w2=obj.getAttribute('vsmwalkoriginalwidth');if(w2==null)obj.offsetWidth;}else{if(obj.getAttribute('vsmwalkoriginalwidth')==null)obj.setAttribute('vsmwalkoriginalwidth',w1);}
if(h2==null){h2=obj.getAttribute('vsmwalkoriginalheight');if(h2==null)obj.offsetHeight;}else{if(obj.getAttribute('vsmwalkoriginalheight')==null)obj.setAttribute('vsmwalkoriginalheight',h1);}
if(x1&&x2){var valuex=Math.round(x1+((x2-x1)/steps)*step);obj.style.left=valuex+'px';}
if(y1&&y2){var valuey=Math.round(y1+((y2-y1)/steps)*step);obj.style.top=valuey+'px';}
if(w1&&w2){var valuew=Math.round(w1+((w2-w1)/steps)*step);obj.style.width=valuew+'px';}
if(h1&&h2){var valueh=Math.round(h1+((h2-h1)/steps)*step);obj.style.height=valueh+'px';}
obj.style.display='';if(step<steps){eval(functionstep);setTimeout('vsmWalk(\''+objid+'\','+x1+','+y1+','+w1+','+h1+','+x2+','+y2+','+w2+','+h2+','+steps+','+speed+',\''+functionatend.replace(/\'/g,'\\\'')+'\',\''+functionstep.replace(/\'/g,'\\\'')+'\','+(step+1)+')',speed);}else{if(x2){obj.style.left=x2+'px';}
if(y2){obj.style.top=y2+'px';}
if(w2){obj.style.width=w2+'px';}
if(h2){obj.style.height=h2+'px';}
eval(functionatend);}}
function vsmAttachEvent(obj,eventname,action){vsm.attachEvent(obj,eventname,action);}
function vsmLoadScript(file,action){return vsm.loadScript(file,action);}
function vsmHttpRequest(url,callback_function,error_function,response_xml,formid,method,plainform){if(formid){vsm.ajaxForm(document.getElementById(formid),callback_function,error_function);}else{vsm.ajaxCall(url,callback_function,error_function,method,plainform);}}
function vsmAjaxForm(formObj,callback_function,error_function,response_xml){vsm.ajaxForm(formObj,callback_function,error_function);}
function vsmSetOpacity(obj,opacity){vsm.opacity(obj,opacity);}
function vsmFadeIn(obj,finalopacity,functionatend,steps){if(!finalopacity||isNaN(finalopacity))finalopacity=100;vsm.effects.fade(obj,finalopacity,functionatend,steps);}
function vsmFadeOut(obj,finalopacity,functionatend,steps){if(!finalopacity||isNaN(finalopacity))finalopacity=0;vsm.effects.fade(obj,finalopacity,functionatend,steps);}
vsm.canvas={}
vsm.canvas.dragging=false;vsm.canvas.element=null;vsm.canvas.position={x:0,y:0};vsm.canvas.elementOffset=null;vsm.canvas.mouseOffset=null;vsm.canvas.parentX=null;vsm.canvas.parentY=null;vsm.canvas.scrollTop=null;vsm.canvas.scrollLeft=null;vsm.canvas.boundary={top:null,left:null,right:null,bottom:null};vsm.canvas.addElement=function(element,boundary,scalable,minScale,maxScale){}
vsm.canvas.start=function(){if(!vsm.canvas.dragging){vsm.attachEvent(window,'mousedown',vsm.canvas.onMouseDown);vsm.attachEvent(window,'mousemove',vsm.canvas.onMouseMove);vsm.attachEvent(window,'mouseup',vsm.canvas.onMouseUp);vsm.attachEvent(window,'onscroll',vsm.canvas.onMouseMove);vsm.canvas.dragging=true;}}
vsm.canvas.stop=function(){if(vsm.canvas.dragging){vsm.detachEvent(window,'mousedown',vsm.canvas.onMouseDown);vsm.detachEvent(window,'mousemove',vsm.canvas.onMouseMove);vsm.detachEvent(window,'onscroll',vsm.canvas.onMouseMove);vsm.detachEvent(window,'mouseup',vsm.canvas.onMouseUp);vsm.canvas.dragging=false;}}
vsm.canvas.disableSelection=function(e){e.preventDefault();}
vsm.canvas.onMouseDown=function(event){var src=event.target||event.srcElement;if(src.getAttribute('data-vsmdraggable')){var srcid=src.getAttribute('data-vsmdraggable-src');srcid=vsm.object(srcid);if(srcid)src=srcid;vsm.addClass(src,'dragging');vsm.attachEvent(document,'onselectstart',vsm.canvas.disableSelection);window.getSelection().removeAllRanges();var pos=vsm.findPos(src);vsm.canvas.element=src;vsm.canvas.parentX=src.parentNode;while(vsm.canvas.parentX.tagName!='BODY'&&vsm.currentStyle(vsm.canvas.parentX,'overflow-x'!='auto')&&vsm.currentStyle(vsm.canvas.parentX,'overflow-x'!='scroll'))vsm.canvas.parentX=vsm.canvas.parentX.parentNode;if(vsm.canvas.parentX.tagName!='BODY')vsm.canvas.parentX.onscroll=vsm.canvas.onMouseMove;vsm.canvas.parentY=src.parentNode;while(vsm.canvas.parentY.tagName!='BODY'&&vsm.currentStyle(vsm.canvas.parentY,'overflow-y'!='auto')&&vsm.currentStyle(vsm.canvas.parentY,'overflow-y'!='scroll'))vsm.canvas.parentY=vsm.canvas.parentY.parentNode;if(vsm.canvas.parentY.tagName!='BODY')vsm.canvas.parentY.onscroll=vsm.canvas.onMouseMove;vsm.canvas.elementOffset={x:pos.x-src.offsetLeft+vsm.canvas.parentX.scrollLeft,y:pos.y-src.offsetTop+vsm.canvas.parentY.scrollTop}
vsm.canvas.mouseOffset={x:event.clientX-pos.x,y:event.clientY-pos.y}
if(src.getAttribute('data-vsmboundary')){var id=src.getAttribute('data-vsmboundary');if(id=='parent'){var b=src.parentNode;}else{var b=vsm.object(id);}
if(b){vsm.canvas.boundary.left=b.offsetLeft;vsm.canvas.boundary.top=b.offsetTop;vsm.canvas.boundary.right=b.offsetLeft+b.clientWidth;vsm.canvas.boundary.bottom=b.offsetTop+b.clientHeight;}else{b=vsm.json(id);if(b)vsm.canvas.boundary=b;}}else{vsm.canvas.boundary={top:null,left:null,right:null,bottom:null};}}}
vsm.canvas.onMouseMove=function(event){if(vsm.canvas.element){if(event.type=='mousemove'){x=(event.clientX-vsm.canvas.elementOffset.x-vsm.canvas.mouseOffset.x+vsm.canvas.parentX.scrollLeft);y=(event.clientY-vsm.canvas.elementOffset.y-vsm.canvas.mouseOffset.y+vsm.canvas.parentY.scrollTop);vsm.canvas.scrollLeft=vsm.canvas.parentX.scrollLeft;vsm.canvas.scrollTop=vsm.canvas.parentY.scrollTop;}else if(event.type=='scroll'){y=vsm.canvas.position.y+vsm.canvas.parentY.scrollTop-vsm.canvas.scrollTop;}
if(vsm.canvas.boundary.left!=null&&x<vsm.canvas.boundary.left)x=vsm.canvas.boundary.left;if(vsm.canvas.boundary.top!=null&&y<vsm.canvas.boundary.top)y=vsm.canvas.boundary.top;if(vsm.canvas.boundary.right!=null&&x+vsm.canvas.element.offsetWidth>vsm.canvas.boundary.right)x=vsm.canvas.boundary.right-vsm.canvas.element.offsetWidth;if(vsm.canvas.boundary.bottom!=null&&y+vsm.canvas.element.offsetHeight>vsm.canvas.boundary.bottom)y=vsm.canvas.boundary.bottom-vsm.canvas.element.offsetHeight;if(x!=vsm.canvas.position.x){x=x-parseInt(vsm.currentStyle(vsm.canvas.element,'margin-left'));vsm.canvas.element.style.left=x+'px';if(event.type=='mousemove')vsm.canvas.position.x=x;}
if(y!=vsm.canvas.position.y){y=y-parseInt(vsm.currentStyle(vsm.canvas.element,'margin-top'));vsm.canvas.element.style.top=y+'px';if(event.type=='mousemove')vsm.canvas.position.y=y;}}}
vsm.canvas.onMouseUp=function(event){vsm.detachEvent(document,'onselectstart',vsm.canvas.disableSelection);vsm.replaceClass(vsm.canvas.element,'dragging','');vsm.canvas.element=null;}
vsm.bind=function(data){if(!data||data.parentNode){var bindType='dom';var elements=document.querySelectorAll('[dom-bind]');}else{var bindType='data';var elements=document.querySelectorAll('[data-bind]');}
var elementsLength=elements.length;for(var e=0;e<elementsLength;e++){var element=elements[e];var binds=element.getAttribute(bindType+'-bind').split(',');var bindsLength=binds.length;for(var b=0;b<bindsLength;b++){var pos=binds[b].indexOf('=');if(pos===-1)break;var bindattr=binds[b].substr(0,pos);var value=binds[b].substr(pos+1);switch(bindType){case'dom':try{value=eval(value);}catch(e){console.log('Element: '+element.outerHTML+'\nBind: '+bindattr+'\nOperation:'+value+'\nResponse: '+e.message);}
break;case'data':if(data[value]){value=data[value];}else{value=null;}
break;}
if(value==null)break;switch(bindattr){case'innerHTML':element.innerHTML=value;break;case'innerText':element.innerText=value;break;case'class':element.className=value;break;default:if(bindattr.substr(0,6)=='style:'){bindattr=bindattr.substr(6);if(bindattr=='background-image:url'){element.style.setProperty('background-image','url('+value+')');}else{element.style.setProperty(bindattr,value);}}else if(bindattr.substr(0,6)=='class:'){bindattr=bindattr.substr(6);if(value=='1'||value.toLowerCase()=='true'){vsm.addClass(element,bindattr);}else if(value=='0'||value.toLowerCase()=='false'){vsm.removeClass(element,bindattr);}else{vsm.replaceClass(element,bindattr,value);}}else{element.setAttribute(bindattr,value);}}}}}
vsm.fullScreen={}
vsm.fullScreen.enabled=function(){return(document.fullScreen||document.webkitIsFullScreen||document.mozfullScreen&&document.msfullScreen);}
vsm.fullScreen.toggle=function(el){if(vsm.fullScreen.enabled()){vsm.fullScreen.exit();}else{vsm.fullScreen.enter(el);}}
vsm.fullScreen.enter=function(el){if(!el)el=document.documentElement;if(el.requestFullscreen){el.requestFullscreen();}else if(el.msRequestFullscreen){el.msRequestFullscreen();}else if(el.mozRequestFullScreen){el.mozRequestFullScreen();}else if(el.webkitRequestFullscreen){el.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT);}}
vsm.fullScreen.exit=function(){if(document.exitFullscreen){document.exitFullscreen();}else if(document.msExitFullscreen){document.msExitFullscreen();}else if(document.mozCancelFullScreen){document.mozCancelFullScreen();}else if(document.webkitExitFullscreen){document.webkitExitFullscreen();}}
vsm.drag={}
vsm.drag.dragging=false;vsm.drag.elements=null;vsm.drag.el=null;vsm.drag.position={x:0,y:0};vsm.drag.elementOffset=null;vsm.drag.mouseOffset=null;vsm.drag.parentX=null;vsm.drag.parentY=null;vsm.drag.scrollTop=null;vsm.drag.scrollLeft=null;vsm.drag.boundary={top:null,left:null,right:null,bottom:null};vsm.drag.start=function(){if(!vsm.drag.dragging){vsm.attachEvent(window,'mousedown',vsm.drag.onMouseDown);vsm.attachEvent(window,'mousemove',vsm.drag.onMouseMove);vsm.attachEvent(window,'mouseup',vsm.drag.onMouseUp);vsm.attachEvent(window,'onscroll',vsm.drag.onMouseMove);vsm.drag.dragging=true;}}
vsm.drag.stop=function(){if(vsm.drag.dragging){vsm.detachEvent(window,'mousedown',vsm.drag.onMouseDown);vsm.detachEvent(window,'mousemove',vsm.drag.onMouseMove);vsm.detachEvent(window,'onscroll',vsm.drag.onMouseMove);vsm.detachEvent(window,'mouseup',vsm.drag.onMouseUp);vsm.drag.dragging=false;}}
vsm.drag.disableSelection=function(e){e.preventDefault();}
vsm.drag.onMouseDown=function(event){var src=event.target||event.srcElement;if(src.getAttribute('data-vsmdrag')){var srcid=src.getAttribute('data-vsmdraggable-src');srcid=vsm.object(srcid);if(srcid)src=srcid;vsm.addClass(src,'dragging');vsm.drag.el={};vsm.drag.el.src=src;vsm.drag.el.type=null;vsm.drag.el.jaildom=null;vsm.attachEvent(document,'onselectstart',vsm.drag.disableSelection);window.getSelection().removeAllRanges();var pos=vsm.findPos(src);vsm.drag.element=src;vsm.drag.parentX=src.parentNode;while(vsm.drag.parentX.tagName!='BODY'&&vsm.currentStyle(vsm.drag.parentX,'overflow-x'!='auto')&&vsm.currentStyle(vsm.drag.parentX,'overflow-x'!='scroll'))vsm.drag.parentX=vsm.drag.parentX.parentNode;if(vsm.drag.parentX.tagName!='BODY')vsm.drag.parentX.onscroll=vsm.drag.onMouseMove;vsm.drag.parentY=src.parentNode;while(vsm.drag.parentY.tagName!='BODY'&&vsm.currentStyle(vsm.drag.parentY,'overflow-y'!='auto')&&vsm.currentStyle(vsm.drag.parentY,'overflow-y'!='scroll'))vsm.drag.parentY=vsm.drag.parentY.parentNode;if(vsm.drag.parentY.tagName!='BODY')vsm.drag.parentY.onscroll=vsm.drag.onMouseMove;if(src.style.position)src.setAttribute('defaultPosition',src.style.position);if(src.getAttribute('data-vsmboundary')){var id=src.getAttribute('data-vsmboundary');if(id=='parent'){var b=src.parentNode;}else{var b=vsm.object(id);}
if(b){vsm.drag.boundary.left=b.offsetLeft;vsm.drag.boundary.top=b.offsetTop;vsm.drag.boundary.right=b.offsetLeft+b.clientWidth;vsm.drag.boundary.bottom=b.offsetTop+b.clientHeight;src.style.position='absolute';vsm.drag.el.type="jail";}else{b=vsm.json(id);if(b)vsm.drag.boundary=b;src.style.position='fixed';src.style.left=pos.x+'px';src.style.top=pos.y+'px';}}else{vsm.drag.boundary={top:null,left:null,right:null,bottom:null};src.style.position='fixed';src.style.left=pos.x+'px';src.style.top=pos.y+'px';}
vsm.drag.elementOffset={x:pos.x-src.offsetLeft+vsm.drag.parentX.scrollLeft,y:pos.y-src.offsetTop+vsm.drag.parentY.scrollTop}
vsm.drag.el.offset={x:pos.x-src.offsetLeft+vsm.drag.parentX.scrollLeft,y:pos.y-src.offsetTop+vsm.drag.parentY.scrollTop}
vsm.drag.mouseOffset={x:event.clientX-pos.x,y:event.clientY-pos.y}}}
vsm.drag.onMouseMove=function(event){if(vsm.drag.element){if(event.type=='mousemove'){x=(event.clientX-vsm.drag.elementOffset.x-vsm.drag.mouseOffset.x+vsm.drag.parentX.scrollLeft);y=(event.clientY-vsm.drag.elementOffset.y-vsm.drag.mouseOffset.y+vsm.drag.parentY.scrollTop);vsm.drag.scrollLeft=vsm.drag.parentX.scrollLeft;vsm.drag.scrollTop=vsm.drag.parentY.scrollTop;}else if(event.type=='scroll'){y=vsm.drag.position.y+vsm.drag.parentY.scrollTop-vsm.drag.scrollTop;}
if(vsm.drag.boundary.left!=null&&x<vsm.drag.boundary.left)x=vsm.drag.boundary.left;if(vsm.drag.boundary.top!=null&&y<vsm.drag.boundary.top)y=vsm.drag.boundary.top;if(vsm.drag.boundary.right!=null&&x+vsm.drag.element.offsetWidth>vsm.drag.boundary.right)x=vsm.drag.boundary.right-vsm.drag.element.offsetWidth;if(vsm.drag.boundary.bottom!=null&&y+vsm.drag.element.offsetHeight>vsm.drag.boundary.bottom)y=vsm.drag.boundary.bottom-vsm.drag.element.offsetHeight;if(x!=vsm.drag.position.x){x=x-parseInt(vsm.currentStyle(vsm.drag.element,'margin-left'));vsm.drag.element.style.left=x+'px';if(event.type=='mousemove')vsm.drag.position.x=x;}
if(y!=vsm.drag.position.y){y=y-parseInt(vsm.currentStyle(vsm.drag.element,'margin-top'));vsm.drag.element.style.top=y+'px';if(event.type=='mousemove')vsm.drag.position.y=y;}}}
vsm.drag.onMouseUp=function(event){if(!vsm.drag.element)return;vsm.detachEvent(document,'onselectstart',vsm.drag.disableSelection);vsm.replaceClass(vsm.drag.element,'dragging','');if(vsm.drag.element.getAttribute('defaultPosition')){vsm.drag.element.style.position=vsm.drag.element.getAttribute('defaultPosition');vsm.drag.element.removeAttribute('defaultPosition')}else{vsm.drag.element.style.removeProperty('position');}
vsm.drag.element=null;}
vsm.noDiacritics=function(s){var latin_map={"Á":"A","À":"A","Â":"A","Ä":"A","Ã":"A","Å":"A","Æ":"AE","Ç":"C","Ð":"D","É":"E","È":"E","Ê":"E","Ë":"E","á":"a","à":"a","â":"a","ä":"a","ã":"a","å":"a","æ":"ae","ç":"c","ð":"d","é":"e","è":"e","ê":"e","ë":"e","Í":"I","Ì":"I","Î":"I","Ï":"I","Ñ":"N","Ó":"O","Ò":"O","Ô":"O","Ö":"O","Õ":"O","Ø":"O","Œ":"CE","í":"i","ì":"i","î":"i","ï":"i","ñ":"n","ó":"o","ò":"o","ô":"o","ö":"o","õ":"o","ø":"o","œ":"ce","Š":"S","Þ":"T","Ú":"U","Ù":"U","Û":"U","Ü":"U","Ý":"Y","Ÿ":"Y","Ž":"Z","š":"s","ß":"B","þ":"b","ú":"u","ù":"u","û":"u","ü":"u","ý":"y","ÿ":"y","ž":"z"};return s.replace(/[^A-Za-z0-9\[\] ]/g,function(a){return latin_map[a]||a});}
vsm.hash=function(str){if(str.length==0)return 0;str=vsm.noDiacritics(str);str=vsm.trim(str);str=str.replace(/[^a-zA-Z0-9 ]/g,'');for(var i=0,len=str.length,chr,hash=0;i<len;i++){chr=str.charCodeAt(i);hash=((hash<<5)-hash)+chr;hash=hash&hash;}
return hash;}
var vpl={};vpl.autoload=function(module,arg){if(!vpl.autoload.module[module]){vpl.autoload.module[module]=true;var ctx=(window.event)?window.event.srcElement:(arg.length>0)?arg[0].target:null;vsm.loadScript('/portal/js/'+module+'.js?'+vpl.autoload.ver,function(){vpl[module].apply(ctx,arg);});}else{vsm.load.check('vpl.autoload.loaded.'+module,{callback:function(){vpl[module].apply(ctx,arg);}})}};vpl.autoload.ver='1.1';vpl.autoload.module=[];vpl.autoload.loaded=[];vpl.scroll=function(){vpl.autoload('scroll',arguments)};vpl.modal=function(){vpl.autoload('modal',arguments)};vpl.tabs=function(){vpl.autoload('tabs',arguments)};vpl.calendar=function(){vpl.autoload('calendar',arguments)};vpl.media=function(){vpl.autoload('media',arguments)};vpl.authproviders=function(){vpl.autoload('authproviders',arguments)};vpl.reload={id:null,active:function(t){if(t>0)vpl.reload.id=setTimeout('window.location.reload()',t*1000);},disable:function(){clearTimeout(vpl.reload.id);}};vpl.swicthVisible=function(o,visible,hidden){o=vsm.object(o);if(!o)return;if(o.className.indexOf(visible)!=-1){vsm.replaceClass(o,' '+visible,hidden)}else{o.className+=' '+visible;}};vpl.changeFontSize=function(o,add){var obj=vsm.object(o);if(!obj){if(document.querySelector){obj=document.querySelector('[class = '+o+']');}else{obj=document.getElementsByTagName('div');for(var i=0,s=obj.length;i<s&&obj[i].className!=o;i++);obj=obj[i];}}
if(!add){obj.style.fontSize=null;return;}
var fs=vsm.currentStyle(obj,'fontSize'),iv;iv=parseInt(fs);fs=fs.replace(iv,'');iv=(add==-1)?iv-1:iv+1;fs=iv+fs;obj.style.fontSize=fs;};vpl.loggedIn=function(){return(getCookie("vsmloggedin")!=0&&getCookie("vsmloggedin"));}
vpl.loginBox=function(o,url,modal){domid=(typeof o!='string')?'vplloginbox':o;o=vsm.object(o);if(o&&o.id)domid=o.id;if(!o)o=document.body.appendChild(document.createElement('div'));vsm.loadScript('/tools/form.js?'+vpl.autoload.ver);vpl.reload.disable();if(modal){o.id=domid;o.innerHTML='<div class=vplpreloader></div>';vpl.modal(o,{closeonclick:false});if(vpl.modal.canvas)vpl.modal.canvaspos();o.className='loading';}
vsm.ajaxCall(url,function(r){r=vsm.json(r);if(r.url&&!r.html)window.location=url;if(o.id.indexOf('signup')!=-1)r.html='<div id=vplsignup class=visible>'+r.html+'</div>';o.innerHTML=r.html;o.innerHTML+='<div id=vplloginbox-close onclick="vpl.modal.close()"></div>';vsm.addClass(o,o.id)
vsm.addClass(o,'visible');var t=vsm.object('vpllogintitle');if(!t){o.innerHTML='<div id=vpllogintitle class=></div>'+o.innerHTML;t=vsm.object('vpllogintitle');}
if(r.title)t.innerHTML=r.title;if(o.id.indexOf('editprofile')!=-1)vsm.dom.updateSession(o);if(url.indexOf('vpllogin')!=-1||o.id.indexOf('editprofile')!=-1)vpl.authproviders(o);if(vpl.modal.canvas)vpl.modal.canvaspos();o.id='loginbox';vsm.removeClass(o,'loading');},function(r){alert(r);vpl.modal.close();});};vpl.enableTwitter=function(o){o=vsm.object(o);if(!vpl.loggedIn()){vpl.loginForm();return false;}
if(!vsm.session.twitter){vpl.authproviders();o.setAttribute('data-vpllogin',1);o.setAttribute('data-jscallback','vsm.object(\''+o.id+'\').checked=true');window.open('/portal/lib/twitter/auth.php','twitterauth','width=800,height=500,scrollbars=yes');return false;}}
vpl.enableFacebook=function(o){o=vsm.object(o);if(!vpl.loggedIn()){vpl.loginForm();return false;}
if(!vsm.session.facebook||!vsm.session.facebookenabled){o.setAttribute('data-vpllogin',1);o.setAttribute('data-jscallback','vsm.object(\''+o.id+'\').checked=true');vpl.authproviders.facebooklogin(o);return false;}}
vpl.loginForm=function(o,modal){if(typeof modal=='undefined')modal=true;if(!o)o='loginbox';vpl.loginBox(o,'/portal/ajax/vpllogin.vnc',modal);};vpl.signUpForm=function(o,modal){if(typeof modal=='undefined')modal=true;if(!o)o='signupbox';vpl.loginBox(o,'/portal/ajax/vplsignup.vnc',modal);};vpl.editProfile=function(o,modal){if(typeof modal=='undefined')modal=true;if(!o)o='editprofilebox';vpl.loginBox(o,'/portal/ajax/vpleditprofile.vnc',modal);};vpl.loginContent=function(id,si){o=vsm.object('loginbox');if(o)o.parentNode.removeChild(o);vpl.loginBox('logincontent','/portal/ajax/vplcontent.vnc?id='+id+'&si='+si,true);}
var vplloginerrorid;vpl.loginError=function(t){var o=vsm.object(vplloginerrorid);o.className='error';o.innerHTML=t;setTimeout(function(){o.className='noerror'},5000);vsmSubmitButtonEnabled(true);};vpl.loginBlurError=function(t){vpl.loginError(t)
setTimeout(function(){vsm.object(vplloginerrorid).className='noerror'},5000);};vpl.signUp=function(o){vsm.loadScript('/tools/form.js?'+vpl.autoload.ver);var url='/portal/ajax/vplsignup.vnc';o=vsm.object(o);if(vpl.modal.canvas){vpl.modal.canvas.className='loading';}
vsm.ajaxCall(url,function(r){r=vsm.json(r);if(o){vpl.modal.canvas.className='visible signupbox';o.innerHTML=r.html;var t=vsm.object('vpllogintitle');if(o.id=='vplsignup'&&t&&r.title)t.innerHTML=r.title;o.className='visible';o=vsm.object('vpllocallogin');if(o)o.className='hidden';o=vsm.object('vplremotelogin');if(o)o.className='hidden';if(vpl.modal.canvas)vpl.modal.canvaspos();}else{window.location=r.url;}});};vpl.banner={change:function(id){o=vsm.object(id);if(vsm.hasClass(o,'collapse')){vpl.banner.expand(id);}else{vpl.banner.collapse(id);}},expand:function(id){o=vsm.object(id);b=vsm.object(id+'-button');vsm.replaceClass(o,'collapse','expand');if(b)vsm.replaceClass(b,'expand','collapse');o.style.height=o.getAttribute('data-maxheight')+'px';},collapse:function(id){o=vsm.object(id);b=vsm.object(id+'-button');vsm.replaceClass(o,'expand','collapse');if(b)vsm.replaceClass(b,'collapse','expand');o.style.height=o.getAttribute('data-minheight')+'px';},lightbox:function(id){b=vsm.object(id+'-expanded');b.style.display='inline-block';b.style.visibility='visible';vpl.modal(b,{closeonkeyesc:true,closeonclick:false});},lightboxclose:function(id){o=vsm.object(id);b=vsm.object(id+'-expanded');o.style.visibility='visible';o.style.display='inline-block';b.style.visibility='hidden';b.style.display='none';vpl.modal.close();},floatingbox:function(id){b=vsm.object(id+'-expanded');b.style.visibility='visible';},floatingclose:function(id){b=vsm.object(id+'-expanded');b.style.visibility='hidden';}};function vsmpoll_voteok(result,pollid,voted,show){document.getElementById('b_'+pollid).style.display='none';var e=(parseInt(voted)||parseInt(show))?'r_':'f_';document.getElementById(e+pollid).style.display='';document.getElementById(e+pollid).innerHTML=result;}
function vplsearch_submit(searchid,a,amc,amo){var frm=vsm.object('frm'+searchid);if(!frm.q.value){alert('No se ingresó el término para la búsqueda.');return false;}
if(frm.q.value.length<3){alert('El término de la búsqueda debe tener al menos 3 carácteres.');return false;}
vsm.object('b_'+searchid).style.display='';if(a){vsm.object('f_'+searchid).style.display='';vsm.object('r_'+searchid).style.display='none';vsmAjaxForm(frm,'vplsearch_ok(\''+searchid+'\',\''+amc+'\',\''+amo+'\')','alert');}else{frm.submit();}
return false;}
function vplsearch_ok(response,searchid,amc,amo){var busypanel=vsm.object('b_'+searchid);var resultpanel=vsm.object('r_'+searchid);busypanel.style.display='none';busypanel.style.height='auto';resultpanel.innerHTML=response;resultpanel.style.display='';}
function vplrate_ok(response,objectid){var rate=document.getElementById('rate_'+objectid);var d=document.createElement('div');d.innerHTML=response
rate.innerHTML=d.childNodes[0].innerHTML;}
function vplrate_submit(oId,value){var fo=document.getElementById('frmrate_'+oId);if(value){fo.v.value=value;}else{fo.s.value=1;}
vsmAjaxForm(fo,'vplrate_ok(\''+oId+'\')','');}
vpl.email=function(objname,modal){objname=(objname)?objname:vpl.email.objectname;if(!objname)return;vplSwitchVisible('vpler_'+objname,'none');if(modal){vpl.modal('vplef_'+objname,{color:'none',opacity:'none'});}else{vplSwitchVisible('vplef_'+objname,'');}
vsm.object('vplefrm_'+objname).reset();vsm.object('vplef_'+objname).focus();vsm.object('vplebtn_'+objname).disabled=false;}
function vplemail_ok(r,i){var modal=vsm.object('vplfgm');if(modal){vpl.modal.close();}
vplSwitchVisible('vpler_'+i,'');vplSwitchVisible('vplef_'+i,'none');setTimeout(function(){vplSwitchVisible('vpler_'+i,'none');vpl.email.closefnc();},3000);}
function vplemail_error(t,i){alert(t);vsm.object('vplebtn_'+i).disabled=false;}
function vplcomment_ok(r,i){vplSwitchVisible('f_'+i,'none');vplSwitchVisible('r_'+i,'');setTimeout(function(){vsm.object('frm_'+i).reset();vplSwitchVisible('f_'+i,'');vplSwitchVisible('r_'+i,'none');vsmSubmitButtonEnabled(true)},5000);}
function waitvplfgal(i,j,p,t,s){if(typeof vplfgal=='undefined'){setTimeout(function(){waitvplfgal(i,j,p,t,s);},50);}else if(!window['vplfgo_'+i]){window['vplfgo_'+i]=new vplfgal(i,j,p,t,s);}}
function vplOpacity(obj,opacity){opacity=(opacity==100)?99.999:opacity;obj.style.filter="alpha(opacity="+opacity+")";obj.style.opacity=(opacity/100);obj.style.MozOpacity=(opacity/100);obj.style.KHTMLOpacity=(opacity/100);}
function vplSwitchVisible(id,forcevalue){var obj=vsm.object(id);if(!obj)return;if(forcevalue!=undefined){obj.style.display=forcevalue;return}
if(obj.style.display=='none'){obj.style.display='';}else{obj.style.display='none';}
return obj;}
function vplFadeIn(objid,finalopacity,value){if(!finalopacity)finalopacity=100;var obj=document.getElementById(objid);if(obj){if(value==undefined){obj.style.display='';value=0;}
if(value>finalopacity)value=finalopacity;vplOpacity(obj,value);if(value<finalopacity){setTimeout("vplFadeIn('"+objid+"','"+finalopacity+"',"+(value+20)+")",50);}}}
function waitobj(o,args,v,so){var d=o.split('.');var w=window[d[0]];for(var i=1;i<d.length&&w&&(w=(typeof w[d[i]]!='undefined')?w[d[i]]:false);i++);if(!w){setTimeout(function(){waitobj(o,args,v,so);},50);}else if(!window[v]){function F(args){return w.apply(this,args);}
F.prototype=w.prototype;if(v){window[v]=new F(args);}else{F(args);}
if(so)so.call();}}
function vsmpoll_setvote(pollid,optid,busymsg){var objid=document.getElementById('pollopt'+pollid);objid.value=optid;vsmpoll_submit(pollid,busymsg,1,0)}
function vsmpoll_submit(pollid,busymsg,voted,show){var fo=document.getElementById('frm_'+pollid);if(!voted)voted=0;o=false;r=o;for(i=0;i<fo.length&&!show;i++){if(fo[i].type=='radio'||(fo[i].type=='hidden'&&fo[i].name=='po'&&fo[i].value)){r=true;if(fo[i].checked||(fo[i].type=='hidden'&&fo[i].value))o=true;}}
if(r&&!o)alert('Debe seleccionar una de las opciones de la encuesta');else{var f=document.getElementById('f_'+pollid);var b=document.getElementById('b_'+pollid);var h=f.offsetHeight;if(h>0){b.style.height=h+'px';}
f.style.display='none';b.style.display='';b.innerHTML=busymsg;if(!r){var url=fo.getAttribute('ac').replace('%%s%%',show);url=url.replace('%%v%%',voted);vsm.ajaxCall(url,'vsmpoll_voteok(\''+pollid+'\','+voted+','+show+')','alert');}
if(voted&&r){fo.action=fo.action.replace('%%s%%',show);fo.action=fo.action.replace('%%v%%',voted);vsmAjaxForm(fo,'vsmpoll_voteok(\''+pollid+'\','+voted+','+show+')','alert');}}}
function vplFadeOut(objid,startopacity,value){if(!startopacity)startopacity=100;var obj=document.getElementById(objid);if(obj){if(value==undefined){obj.style.display='';value=startopacity;}
if(value<0)value=0;vplOpacity(obj,value);if(value>0){setTimeout("vplFadeOut('"+objid+"','"+startopacity+"',"+(value-20)+")",50);}else{obj.style.display='none';}}}
currentfontsize=10;function bigger(){if(currentfontsize<16)currentfontsize++;var vsmcontent=document.getElementById('vsmcontent');if(vsmcontent)vsmcontent.style.fontSize=currentfontsize+'pt';}
function smaller(){if(currentfontsize>7)currentfontsize--;var vsmcontent=document.getElementById('vsmcontent');if(vsmcontent)vsmcontent.style.fontSize=currentfontsize+'pt';}
function dropin(c){for(i=0;i<c.childNodes.length;i++){if(c.childNodes[i].getAttribute("child")==1){vplSwitchVisible(c.childNodes[i]);}}}
function dropout(c){for(i=0;i<c.childNodes.length;i++){if(c.childNodes[i].getAttribute("child")==1){vplSwitchVisible(c.childNodes[i],"none");}}}